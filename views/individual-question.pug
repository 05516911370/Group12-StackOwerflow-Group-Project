extends layout.pug

block content
    h1(class="Q_A__title") QUESTION
    div(class="question-container")
        div(class="title-profile")
            h4= question.User.userName
            if locals.authenticated
                if userId === question.User.id
                    div(class="edit-question")
                        a(href=`/questions/${question.id}/edit`) Edit
                    div(class="delete-question")
                        a(href=`/questions/${question.id}/delete`) Delete
        div(class="question-body")
            h2(class="question-title-db-mp")=question.title
            div= question.message
            div(class='images-container')
                img(src=`${question.questionImg1}`)
                img(src=`${question.questionImg2}`)
                img(src=`${question.questionImg3}`)
        div
        if locals.authenticated
            if userId !== question.userId
                div(class="answer-a-question orange-button")
                    a(href=`/questions/${question.id}/answer`) Answer a Question
    h1(class="Q_A__title") ANSWERS
    div(class="answers-container")
        if answers
            each answer in question.Answers
                div(class='answer-box')
                    div(class='answer-message')=answer.message
                    div(class="user__info")
                        if locals.authenticated
                            if userId === answer.userId
                                div(class="answer-profile-pic")
                                    //- img(src="", alt="")
                                div(class="edit-answer orange-button")
                                    a(href=`/questions/answers/${answer.id}/edit`) Edit
                                div(class="delete-answer orange-button")
                                    a(href=`/questions/answers/${answer.id}/delete`) Delete
                                div(class="votes")
                                    p(class="inactive__upvotes") Upvotes
                                    p(class="vote-count")=answer.Upvotes.length-answer.Downvotes.length
                                    p(class="inactive__downvotes") Downvotes
                            else
                                form(action=`/questions/answer/${answer.id}/upVotes` method="post")
                                    button(type="submit" class="active__upvotes") Upvote
                                p(class="vote-count")=answer.Upvotes.length-answer.Downvotes.length
                                form(action=`/questions/answer/${answer.id}/downVotes` method="post")
                                    button(type="submit" class="active__downvotes") Downvote
                        else
                            div(class="votes")
                                p(class="inactive__upvotes") Upvotes
                                p(class="vote-count")=answer.Upvotes.length-answer.Downvotes.length
                                p(class="inactive__downvotes") Downvotes
                div(class='images-container')
                    img(src=`${answer.answerImg1}`)
                    img(src=`${answer.answerImg2}`)
                    img(src=`${answer.answerImg3}`)
        //- else
        //-     p No Answers Yet
    script(src="/javascripts/votes.js")
